{% extends "base.html" %}
{% load staticfiles %}
{% load leaflet_tags %}

{% block head %}
    <title>Corruption map</title>
    {% leaflet_js %}  
    {% leaflet_css %}<!-- 
    <script src="http:///rawgithub.com/domoritz/leaflet-locatecontrol/gh-pages/dist/L.Control.Locate.min.js"</script>
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
	<link href="http:///rawgithub.com/domoritz/leaflet-locatecontrol/gh-pages/dist/L.Control.Locate.min.css" rel="stylesheet"> -->
    <script src="{% static "js/jquery-1.11.3.min.js" %}"></script>

{% endblock %}

{% block map %}
<style>
    .leaflet-container {  /* all maps */
        width:  1000px;
        height: 700px;
        float: left;
        margin-right: 50px;
    }

    #specialbigmap {
        height: 800px;
    }

    .right_block {
        /*float: right;  */
        margin-left: 20px;
   }


</style> 
    {% leaflet_map "main" callback="main_map_init" %}

    <script type="text/javascript">
        function main_map_init (map, options) {          
           
                // Add GeoJSON layer
                L.geoJson({{buildings}}).addTo(map);
				// // create location control and add to map
				// lc = L.control.locate({
				//         follow: true,
				//         strings: {
				//             title: "подпись"
				//         }
				//     }).addTo(map);
				//  // request location update and set location
				// lc.locate();
				          
				        }
    </script>

<div class="right_block">
    <input type='text' id='polygon_id' placeholder="" > 
    <button type="button" class="btn btn-primary" id="get_claims" href="javascript:" >Запит</button>
    <br><br>
    <div id="target"></div>
</div>


<script type="text/javascript">   
    $(document).ready(function () {      
        $("#get_claims").click(function() {          
            var polygon_id = $('#polygon_id').val();
            $.get("/get_claims/"  + polygon_id + "/", function(data) {              
                $("#target").html(data.claims);
            });
        });
    });
</script>


{% endblock %}

